<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="https://scontent.fsjk1-1.fna.fbcdn.net/v/t1.0-9/83652091_136284957845200_8237786461009608704_n.png?_nc_cat=109&amp;_nc_ohc=BC9ilU71jTAAX_V9Elf&amp;_nc_ht=scontent.fsjk1-1.fna&amp;oh=c145d921258900ee4f26d0a56fe2ecdb&amp;oe=5EB8C623"/><noscript></noscript><style data-href="/styles.b653de596cb40ead5224.css">@import url(https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap);*{margin:0;padding:0;box-sizing:border-box;font-display:swap}::-webkit-input-placeholder{color:#c2c2c2}:-ms-input-placeholder{color:#c2c2c2}::-ms-input-placeholder{color:#c2c2c2}::placeholder{color:#c2c2c2}body,html{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Roboto Light,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px}a{-webkit-transition:color .15s;transition:color .15s;color:#639}body{font-family:Roboto}.visibleMobile{display:none}.video-responsive{position:relative;padding-bottom:56.2%}a,a:hover{text-decoration:none}.displayInline{display:inline-block}.navBarToggle{border:1px solid #fff;border-radius:4px;width:36px;height:33px;position:absolute;right:20px;padding:8px 5px;display:none}.navBarToggle .iconBar{display:block;width:22px;height:2px;border-radius:1px;margin:4px auto 0;background-color:#fff}.navBarToggle .iconBar:first-child{margin-top:0}.video-responsive iframe{position:absolute;width:100%;height:100%}.diffNewLine{color:#22863a;background-color:#f0fff4}.diffRemoveLine{color:red;background-color:#fcc}.navBarParent{width:100%;float:left;display:flex;align-items:center}.divider{height:30px;margin:0 15px;border-right:1px solid hsla(0,0%,100%,.3)}.githubIcon{width:15px;margin-right:5px}.githubSection{display:flex;align-items:center;color:#000;opacity:.7}.githubSection:hover{text-decoration:none;opacity:1}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#542683}.headerWrapper{border-bottom:1px solid #d4dadf;box-shadow:0 1px 1px 0 rgba(116,129,141,.1);display:flex;align-items:center}.formElement{background-color:transparent;padding:4px;border-bottom:1px solid hsla(0,0%,100%,.3)}.formElement:focus{outline:none;border:none}.formElement svg path{fill:#fff}.searchInput{width:calc(100% - 26px);background-color:transparent!important;border-width:0!important;color:#c2c2c2}.searchInput:focus,.searchInput:focus-within,.searchInput:hover,.searchInput:visited{outline:none;border:0}.searchWrapper{padding-left:0;padding-right:20px;flex:1 1;max-width:600px;position:relative}.searchWrapper a{font-weight:500}.hitWrapper{background-color:#fff;padding:.7em 1em .4em;border-radius:4px;position:absolute;width:80vw;max-width:30em;top:40px;border:1px solid #ccc;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);height:auto;max-height:80vh;overflow:scroll;left:0}.hitWrapper ul li{margin-top:.7em;padding-top:.7em;border-top:1px solid;list-style-type:none}.hitWrapper ul li:first-child{border-top:0;margin-top:0;color:#000!important;padding:0}.showResults{display:block}.hideResults{display:none}.hitWrapper span{color:#000;font-size:14px}.headerTitle{height:auto;font-size:28px;line-height:1.5;font-weight:500;color:#fff!important}.headerTitle a{color:#fff}.headerTitle a:hover{text-decoration:none;opacity:.8}.logoWrapper{padding:21px 0 21px 20px}.logoContent{font-family:Roboto;margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px}.navBarDefault{background-color:#372476;border-radius:0;margin-bottom:0;border:0;box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);-webkit-box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);-moz-box-shadow:-1px 0 4px 1px rgba(175,158,232,.8);-o-box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);z-index:1;padding:15px;position:relative}.navBarDefault,.navBarHeader{display:flex;align-items:center}.navBarHeader{min-width:335px;padding-right:20px;flex:1 1}.navBarBrand{padding:0;display:flex;align-items:center}.navBarBrand img{width:40px;margin-right:16px;display:inline-block}.navBarUL li{list-style-type:none}.navBarUL{-webkit-overflow-scrolling:touch}.navBarUL li a{font-family:Roboto;color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1;padding:10px 15px}.navBarNav{display:flex;align-items:center}.navBarUL li a .shareIcon,.navBarUL li a img{width:20px}.mainWrapper{color:#3b454e;max-width:950px}.navBarUL li a:hover{opacity:.7}pre{border:0!important;background-color:#f5f7f9 /* !important; */}.mainWrapper ol,.mainWrapper ul{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0;padding:0 0 0 2em}.mainWrapper ol li,.mainWrapper ul li{font-size:16px;line-height:1.8;font-weight:400}.headerNav{font-family:Roboto;padding:0 24px;color:#744cbc;font-size:16px;font-weight:500;line-height:1em}.headerNav a{color:#744cbc}.headerNav a,.headerNav a:hover{text-decoration:none}.logoWrapper img{width:40px}.sideBarUL{margin-top:32px}.sideBarUL li{list-style-type:none;width:auto}.sideBarUL li a{color:#fff;font-size:14px;font-weight:500;line-height:1.5;padding:7px 25px 7px 10px;border:1px solid transparent;border-right:0}.rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;color:#4c5767}.rightSideBarUL{margin-top:32px}.rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1}.rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px}.hideFrontLine .collapser{background:transparent;border:none;outline:none;position:absolute;right:20px;z-index:1;cursor:pointer}.hideFrontLine .active>a{background-color:#542683;color:#fff!important}.firstLevel ul li .collapser svg path{fill:#fff!important}.active .collapser>svg>path{fill:#639!important}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1}.sideBarUL .item{list-style:none;padding:0}.sideBarUL .item>a{color:#fff;text-decoration:none;display:flex;align-items:center;position:relative;width:100%;padding-right:35px;padding-left:15px}.sideBarUL .item>a:hover{background-color:#542683;color:#fff!important}.showFrontLine .item>a:hover{background-color:#542683}.showFrontLine .active>a{color:#fff;background-color:#473485}.sideBarUL .item .item{margin-left:16px}.firstLevel>ul>.item{margin-left:0!important}.showFrontLine .item .item{border-left:1px solid #e6ecf1;padding:0;width:calc(100% - 16px)!important}.showFrontLine .item .active>a{border-color:#e6ecf1!important;border-style:solid none solid solid;border-width:1px 0 1px 1px;background-color:#542683;color:#fff}.titleWrapper{display:flex;align-items:center;padding-bottom:40px;border-bottom:1px solid #e6ecf1;margin-bottom:32px}.title{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #744cbc;flex:1 1;margin-top:0;padding:0 16px}.gitBtn{height:30px;min-height:30px;display:flex;align-items:center}.gitBtn img{width:15px;display:inline-block;margin-right:5px}.addPaddTopBottom{padding:50px 0}.nextPreviousWrapper{margin:0;padding:0;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px)}.previousBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;-webkit-transition:border .2s ease 0s;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.leftArrow{color:#9daab6;flex:0 0 auto;font-size:24px;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s}.leftArrow,.preRightWrapper{display:block;margin:0;padding:16px}.preRightWrapper{flex:1 1;text-align:right}.smallContent{display:block;margin:0;padding:0;color:#6e6e6e}.smallContent span{font-size:12px;line-height:1.625;font-weight:400}.nextPreviousTitle{display:block;margin:0;padding:0;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s}.nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500}.nextBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;-webkit-transition:border .2s ease 0s;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.rightArrow{flex:0 0 auto;font-size:24px;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s;color:#9daab6}.nextRightWrapper,.rightArrow{padding:16px;display:block;margin:0}.nextRightWrapper{flex:1 1}.nextBtn:hover,.previousBtn:hover{color:#744cbc;text-decoration:none;border:1px solid #744cbc}.nextBtn:hover .rightArrow,.previousBtn:hover .leftArrow{color:#744cbc}table,table tr{padding:0}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td :last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}.githubBtn{font-size:16px;padding:10px 0 10px 15px;max-height:40px}.githubBtn,.githubBtn span span{display:flex;align-items:center}.communitySection{font-size:24px;font-weight:700}.authorSection{padding:20px 0}.authorName,.authorSection{display:flex;align-items:center}.authorImg img{width:75px;height:75px;border-radius:50%;min-width:75px;max-width:75px;min-height:75px;max-height:75px}.authorDetails{padding-left:10px}.authorDesc{padding-top:5px;font-size:14px}.authorName img{margin-left:10px;display:inline-block;width:20px}.authorName img:hover{opacity:.7}.heading1{font-size:26px;font-weight:800}.heading1,.heading2{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading2{font-size:24px;font-weight:700}.heading3{font-size:20px;font-weight:600}.heading3,.heading4{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading4{font-size:18px;font-weight:500}.heading5{font-size:16px;font-weight:400}.heading5,.heading6{line-height:1.5;margin-bottom:16px;margin-top:32px}.heading6{font-size:14px;font-weight:300}.paragraph{margin:16px 0 32px;line-height:1.625}.pre{font-size:14px;margin:0;padding:16px;overflow:auto}.mainWrapper code{background:#f9f7fb;border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:.9375em}.poweredBy{font-size:.6em;text-align:end;padding:0}.topnav{-webkit-transition:top .5s,bottom .5s}@media (max-width:767px){.responsive{margin-top:15px;position:relative;padding-bottom:20px;border-top:1px solid #fff}.headerTitle{padding-right:50px;font-size:20px}.navBarBrand{min-height:40px}.navBarBrand img{margin-right:8px}.topnav.responsive .visibleMobile{display:block}.topnav .navBarUL{display:none}.topnav.responsive .navBarUL{display:block;text-align:left}.hiddenMobile{display:none!important}hr{margin-top:0;margin-bottom:0}.navBarParent{display:block}.separator{margin-top:20px;margin-bottom:20px}.navBarULRight{position:static}.navBarUL{display:flex;align-items:center;margin:7.5px 0}.navBarUL li{height:37px}.navBarUL li a{font-size:14px;padding:10px 15px}.navBarDefault{display:block}.navBarToggle{margin-right:0;display:block}.navBarHeader{display:flex;min-width:auto;padding-right:0;align-items:center}.navBarBrand{font-size:20px;flex:initial;padding:0 15px 0 0}.titleWrapper{padding:0 15px;display:block}.gitBtn{display:inline-block}.mainWrapper{padding:0 15px}.nextPreviousWrapper{display:block;padding:0 15px}.previousBtn{margin-bottom:20px}.mobileView{text-align:left!important;padding-left:0!important}.searchWrapper{padding:20px 0 0;position:absolute;bottom:0;width:calc(100% - 30px)}.hitWrapper{width:100%;right:0;top:35px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static}}@media (min-width:768px) and (max-width:991px){.navBarDefault{padding:10px}.navBarBrand{font-size:22px}.navBarHeader{min-width:240px;flex:initial}.githubBtn{padding:10px}.divider{margin:0 5px;height:20px}.hitWrapper{max-width:500px}.navBarUL li a{padding:10px 5px}.searchWrapper{padding-left:0}}</style><meta name="generator" content="Gatsby 2.19.12"/><link rel="preconnect" href="https://instagram.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true"></title><link data-react-helmet="true" rel="canonical" href="https://nodejs.reativa.dev/0034-javascript-promises/index"/><script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '2374911412821725'); // Insert your pixel ID here.
  fbq('track', 'PageView');
      </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-155080700-2"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-155080700-2'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-155080700-2', options);
  </script><link as="script" rel="preload" href="/webpack-runtime-93e739afd2c308098c8e.js"/><link as="script" rel="preload" href="/styles-59bc4aca6fceaa19b309.js"/><link as="script" rel="preload" href="/commons-bf39fb211f2d41bc33ff.js"/><link as="script" rel="preload" href="/app-6d6666e88e12b46ed936.js"/><link as="fetch" rel="preload" href="/page-data/0034-javascript-promises/index/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><div class="navBarWrapper"><nav class="navBarDefault"><div class="navBarHeader"><a href="http://bit.ly/reativa-insta" class="navBarBrand"><img class="img-responsive displayInline" src="https://scontent.fsjk1-1.fna.fbcdn.net/v/t1.0-9/83652091_136284957845200_8237786461009608704_n.png?_nc_cat=109&amp;_nc_ohc=BC9ilU71jTAAX_V9Elf&amp;_nc_ht=scontent.fsjk1-1.fna&amp;oh=c145d921258900ee4f26d0a56fe2ecdb&amp;oe=5EB8C623" alt="logo"/></a><div class="headerTitle displayInline">NodeJS para iniciantes | Reativa</div><span class="navBarToggle"><span class="iconBar"></span><span class="iconBar"></span><span class="iconBar"></span></span></div><div id="navbar" class="topnav"><div class="visibleMobile"><style data-emotion-css="dh0tux">.css-dh0tux{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;background-color:#372476;background:linear-gradient(#372476,#3b173b);background:-webkit-gradient(linear,0% 0%,0% 100%,from(#372476),to(#3b173b));background:-webkit-linear-gradient(top,#372476,#3b173b);background:-moz-linear-gradient(top,#372476,#3b173b);background:-ms-linear-gradient(top,#372476,#3b173b);background:-o-linear-gradient(top,#372476,#3b173b);}@media only screen and (max-width:1023px){.css-dh0tux{width:100%;height:100vh;}}@media (min-width:767px) and (max-width:1023px){.css-dh0tux{padding-left:0;}}@media only screen and (max-width:767px){.css-dh0tux{padding-left:0px;background-color:#372476;background:#372476;height:auto;}}</style><aside class="css-dh0tux e1kotgq21"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/introduction">Paulo Luan</a></li><li class=" item "><a href="/0001-node-introduction/index">Introdução ao Node.js</a></li><li class=" item "><a href="/0002-node-history/index">Uma breve história do Node.js</a></li><li class=" item "><a href="/0003-node-installation/index">Como instalar o Node.js</a></li><li class=" item "><a href="/0004-node-javascript-language/index">Quanto de JavaScript você precisa saber para usar Node.js?</a></li><li class=" item "><a href="/0005-node-difference-browser/index">Diferenças entre Node.js e o navegador</a></li><li class=" item "><a href="/0006-v8/index">O V8 JavaScript Engine</a></li><li class=" item "><a href="/0007-node-run-cli/index">Execute scripts Node.js na linha de comando</a></li><li class=" item "><a href="/0008-node-terminate-program/index">Como sair de um programa Node.js</a></li><li class=" item "><a href="/0009-node-environment-variables/index">Como ler variáveis de ambiente do Node.js</a></li><li class=" item "><a href="/0011-node-repl/index">Como usar o REPL no Node.js</a></li><li class=" item "><a href="/0012-node-cli-args/index">Node.js, aceite os argumentos da linha de comando</a></li><li class=" item "><a href="/0013-node-output-to-cli/index">Saída para a linha de comando usando Node.js</a></li><li class=" item "><a href="/0014-node-input-from-cli/index">Aceite a entrada da linha de comando em Node.js</a></li><li class=" item "><a href="/0015-node-export-module/index">Expor a funcionalidade de um arquivo Node.js usando exportações</a></li><li class=" item "><a href="/0016-npm/index">Uma introdução ao gerenciador de pacotes npm</a></li><li class=" item "><a href="/0017-where-npm-install-packages/index">Onde o npm instala os pacotes?</a></li><li class=" item "><a href="/0018-how-to-use-npm-package/index">Como usar ou executar um pacote instalado usando npm</a></li><li class=" item "><a href="/0019-package-json/index">O guia do package.json</a></li><li class=" item "><a href="/0020-package-lock-json/index">O arquivo package-lock.json</a></li><li class=" item "><a href="/0021-npm-know-version-installed/index">Encontre a versão instalada de um pacote npm</a></li><li class=" item "><a href="/0022-npm-install-previous-package-version/index">Instale uma versão mais antiga de um pacote npm</a></li><li class=" item "><a href="/0023-update-npm-dependencies/index">Atualize todas as dependências do Node.js para a versão mais recente</a></li><li class=" item "><a href="/0024-npm-semantic-versioning/index">Semantic Versioning com npm</a></li><li class=" item "><a href="/0025-npm-uninstall-packages/index">Desinstalando pacotes npm</a></li><li class=" item "><a href="/0026-npm-packages-local-global/index">Pacotes npm global ou local</a></li><li class=" item "><a href="/0027-npm-dependencies-devdependencies/index">npm dependencies e devDependencies</a></li><li class=" item "><a href="/0028-npx/index">O npx Package Runner</a></li><li class=" item "><a href="/0029-node-event-loop/index">Event Loop</a></li><li class=" item "><a href="/0030-node-process-nexttick/index">Entendendo process.nextTick()</a></li><li class=" item "><a href="/0031-node-setimmediate/index">Entendendo setImmediate()</a></li><li class=" item "><a href="/0032-javascript-timers/index">JavaScript Timers</a></li><li class=" item "><a href="/0033-javascript-callbacks/index">Programação assíncrona de JavaScript e Callbacks</a></li><li class=" item "><a aria-current="page" class="" href="/0034-javascript-promises/index">Entendendo JavaScript Promises</a></li><li class=" item "><a href="/0035-javascript-async-await/index">JavaScript assíncrono moderno com Async e Await</a></li><li class=" item "><a href="/0036-node-event-emitter/index">Event emitter</a></li><li class=" item "><a href="/0037-node-http-server/index">Construindo um servidor HTTP</a></li><li class=" item "><a href="/0038-node-make-http-requests/index">Fazer solicitações HTTP com Node.js</a></li><li class=" item "><a href="/0039-node-http-post/index">Faça uma requisição HTTP POST usando Node.js</a></li><li class=" item "><a href="/0040a-node-request-data/index">Get HTTP request body data usando Node.js</a></li><li class=" item "><a href="/0040b-node-file-descriptors/index">Trabalhar com descritores de arquivo em Node.js</a></li><li class=" item "><a href="/0041-node-file-stats/index">Como obter os detalhes de um arquivo usando Node.js</a></li><li class=" item "><a href="/0042-node-file-paths/index">Path de arquivo Node.js</a></li><li class=" item "><a href="/0043-node-reading-files/index">Como Ler arquivos usando Node.js</a></li><li class=" item "><a href="/0044-node-writing-files/index">Gravando arquivos com Node.js</a></li><li class=" item "><a href="/0045-node-folders/index">Trabalho com pastas em Node.js</a></li><li class=" item "><a href="/0046-node-module-fs/index">O módulo fs do Node.js</a></li><li class=" item "><a href="/0047-node-module-path/index">O módulo de path do Node.js</a></li><li class=" item "><a href="/0048-node-module-os/index">O módulo de sistema operacional Node.js.</a></li><li class=" item "><a href="/0049-node-module-events/index">O módulo de eventos do Node.js</a></li><li class=" item "><a href="/0050-node-module-http/index">O módulo http do Node.js</a></li><li class=" item "><a href="/0051-node-buffers/index">Node.js Buffers</a></li><li class=" item "><a href="/0052-nodejs-streams/index">Node.js Streams</a></li><li class=" item "><a href="/0053-node-difference-dev-prod/index">Node.js, a diferença entre desenvolvimento e produção</a></li><li class=" item "><a href="/0054-node-exceptions/index">Tratamento de erros no Node.js</a></li><li class=" item "><a href="/0055-node-inspect-object/index">Como Loggar um objeto no Node.js</a></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li></ul></li><style data-emotion-css="1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1kotgq22"><hr/></li><style data-emotion-css="1ktax4b">.css-1ktax4b{list-style:none;}.css-1ktax4b a{color:#5C6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-1ktax4b a:hover{color:rgb(116,76,188) !important;}.css-1ktax4b a svg{float:right;margin-right:1rem;}</style><li class="css-1ktax4b e1kotgq20"><a href="http://bit.ly/reativa-insta" to="http://bit.ly/reativa-insta">Reativa Instagram<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside><hr/></div><ul class="navBarUL navBarNav navBarULRight"><li class="divider hiddenMobile"></li><li class="githubBtn"><span><a href="https://github.com/reativa" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li></ul></div></nav></div><style data-emotion-css="1s71mnb">.css-1s71mnb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}@media only screen and (max-width:767px){.css-1s71mnb{display:block;}}</style><div class="css-1s71mnb ezj7nro0"><style data-emotion-css="192n44p">.css-192n44p{width:298px;}</style><div class="hiddenMobile css-192n44p ezj7nro3"><style data-emotion-css="dh0tux">.css-dh0tux{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;background-color:#372476;background:linear-gradient(#372476,#3b173b);background:-webkit-gradient(linear,0% 0%,0% 100%,from(#372476),to(#3b173b));background:-webkit-linear-gradient(top,#372476,#3b173b);background:-moz-linear-gradient(top,#372476,#3b173b);background:-ms-linear-gradient(top,#372476,#3b173b);background:-o-linear-gradient(top,#372476,#3b173b);}@media only screen and (max-width:1023px){.css-dh0tux{width:100%;height:100vh;}}@media (min-width:767px) and (max-width:1023px){.css-dh0tux{padding-left:0;}}@media only screen and (max-width:767px){.css-dh0tux{padding-left:0px;background-color:#372476;background:#372476;height:auto;}}</style><aside class="css-dh0tux e1kotgq21"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/introduction">Paulo Luan</a></li><li class=" item "><a href="/0001-node-introduction/index">Introdução ao Node.js</a></li><li class=" item "><a href="/0002-node-history/index">Uma breve história do Node.js</a></li><li class=" item "><a href="/0003-node-installation/index">Como instalar o Node.js</a></li><li class=" item "><a href="/0004-node-javascript-language/index">Quanto de JavaScript você precisa saber para usar Node.js?</a></li><li class=" item "><a href="/0005-node-difference-browser/index">Diferenças entre Node.js e o navegador</a></li><li class=" item "><a href="/0006-v8/index">O V8 JavaScript Engine</a></li><li class=" item "><a href="/0007-node-run-cli/index">Execute scripts Node.js na linha de comando</a></li><li class=" item "><a href="/0008-node-terminate-program/index">Como sair de um programa Node.js</a></li><li class=" item "><a href="/0009-node-environment-variables/index">Como ler variáveis de ambiente do Node.js</a></li><li class=" item "><a href="/0011-node-repl/index">Como usar o REPL no Node.js</a></li><li class=" item "><a href="/0012-node-cli-args/index">Node.js, aceite os argumentos da linha de comando</a></li><li class=" item "><a href="/0013-node-output-to-cli/index">Saída para a linha de comando usando Node.js</a></li><li class=" item "><a href="/0014-node-input-from-cli/index">Aceite a entrada da linha de comando em Node.js</a></li><li class=" item "><a href="/0015-node-export-module/index">Expor a funcionalidade de um arquivo Node.js usando exportações</a></li><li class=" item "><a href="/0016-npm/index">Uma introdução ao gerenciador de pacotes npm</a></li><li class=" item "><a href="/0017-where-npm-install-packages/index">Onde o npm instala os pacotes?</a></li><li class=" item "><a href="/0018-how-to-use-npm-package/index">Como usar ou executar um pacote instalado usando npm</a></li><li class=" item "><a href="/0019-package-json/index">O guia do package.json</a></li><li class=" item "><a href="/0020-package-lock-json/index">O arquivo package-lock.json</a></li><li class=" item "><a href="/0021-npm-know-version-installed/index">Encontre a versão instalada de um pacote npm</a></li><li class=" item "><a href="/0022-npm-install-previous-package-version/index">Instale uma versão mais antiga de um pacote npm</a></li><li class=" item "><a href="/0023-update-npm-dependencies/index">Atualize todas as dependências do Node.js para a versão mais recente</a></li><li class=" item "><a href="/0024-npm-semantic-versioning/index">Semantic Versioning com npm</a></li><li class=" item "><a href="/0025-npm-uninstall-packages/index">Desinstalando pacotes npm</a></li><li class=" item "><a href="/0026-npm-packages-local-global/index">Pacotes npm global ou local</a></li><li class=" item "><a href="/0027-npm-dependencies-devdependencies/index">npm dependencies e devDependencies</a></li><li class=" item "><a href="/0028-npx/index">O npx Package Runner</a></li><li class=" item "><a href="/0029-node-event-loop/index">Event Loop</a></li><li class=" item "><a href="/0030-node-process-nexttick/index">Entendendo process.nextTick()</a></li><li class=" item "><a href="/0031-node-setimmediate/index">Entendendo setImmediate()</a></li><li class=" item "><a href="/0032-javascript-timers/index">JavaScript Timers</a></li><li class=" item "><a href="/0033-javascript-callbacks/index">Programação assíncrona de JavaScript e Callbacks</a></li><li class=" item "><a aria-current="page" class="" href="/0034-javascript-promises/index">Entendendo JavaScript Promises</a></li><li class=" item "><a href="/0035-javascript-async-await/index">JavaScript assíncrono moderno com Async e Await</a></li><li class=" item "><a href="/0036-node-event-emitter/index">Event emitter</a></li><li class=" item "><a href="/0037-node-http-server/index">Construindo um servidor HTTP</a></li><li class=" item "><a href="/0038-node-make-http-requests/index">Fazer solicitações HTTP com Node.js</a></li><li class=" item "><a href="/0039-node-http-post/index">Faça uma requisição HTTP POST usando Node.js</a></li><li class=" item "><a href="/0040a-node-request-data/index">Get HTTP request body data usando Node.js</a></li><li class=" item "><a href="/0040b-node-file-descriptors/index">Trabalhar com descritores de arquivo em Node.js</a></li><li class=" item "><a href="/0041-node-file-stats/index">Como obter os detalhes de um arquivo usando Node.js</a></li><li class=" item "><a href="/0042-node-file-paths/index">Path de arquivo Node.js</a></li><li class=" item "><a href="/0043-node-reading-files/index">Como Ler arquivos usando Node.js</a></li><li class=" item "><a href="/0044-node-writing-files/index">Gravando arquivos com Node.js</a></li><li class=" item "><a href="/0045-node-folders/index">Trabalho com pastas em Node.js</a></li><li class=" item "><a href="/0046-node-module-fs/index">O módulo fs do Node.js</a></li><li class=" item "><a href="/0047-node-module-path/index">O módulo de path do Node.js</a></li><li class=" item "><a href="/0048-node-module-os/index">O módulo de sistema operacional Node.js.</a></li><li class=" item "><a href="/0049-node-module-events/index">O módulo de eventos do Node.js</a></li><li class=" item "><a href="/0050-node-module-http/index">O módulo http do Node.js</a></li><li class=" item "><a href="/0051-node-buffers/index">Node.js Buffers</a></li><li class=" item "><a href="/0052-nodejs-streams/index">Node.js Streams</a></li><li class=" item "><a href="/0053-node-difference-dev-prod/index">Node.js, a diferença entre desenvolvimento e produção</a></li><li class=" item "><a href="/0054-node-exceptions/index">Tratamento de erros no Node.js</a></li><li class=" item "><a href="/0055-node-inspect-object/index">Como Loggar um objeto no Node.js</a></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li><li class=" item "></li></ul></li><style data-emotion-css="1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1kotgq22"><hr/></li><style data-emotion-css="1ktax4b">.css-1ktax4b{list-style:none;}.css-1ktax4b a{color:#5C6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-1ktax4b a:hover{color:rgb(116,76,188) !important;}.css-1ktax4b a svg{float:right;margin-right:1rem;}</style><li class="css-1ktax4b e1kotgq20"><a href="http://bit.ly/reativa-insta" to="http://bit.ly/reativa-insta">Reativa Instagram<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside></div><style data-emotion-css="tt3c6h">.css-tt3c6h{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;margin-top:3rem;}@media only screen and (max-width:1023px){.css-tt3c6h{padding-left:0;margin:0 10px;margin-top:3rem;}}</style><main class="css-tt3c6h ezj7nro1"><style data-emotion-css="14zj307">@media only screen and (max-width:50rem){.css-14zj307{width:100%;position:relative;}}</style><div class="css-14zj307 ezj7nro2"><div class="titleWrapper"><h1 class="title">Entendendo JavaScript Promises</h1><style data-emotion-css="qu2iew">.css-qu2iew{padding:1rem 1.5rem;text-align:right;}.css-qu2iew a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211,220,228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36,42,49);background-color:rgb(255,255,255);box-shadow:rgba(116,129,141,0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-qu2iew a:hover{background-color:rgb(245,247,249);}</style><div class="mobileView css-qu2iew ezk51vi0"></div></div><div class="mainWrapper"><h2 class="heading2" id="introduçãoapromises">Introdução a Promises</h2><iframe title="Introduction to promises" src="https://glitch.com/embed/#!/embed/nodejs-dev-0034-01?path=server.js&amp;previewSize=35&amp;attributionHidden=true&amp;sidebarCollapsed=true" alt="nodejs-dev-0034-01 on Glitch" style="height:400px;width:100%;border:0"></iframe><p class="paragraph">Uma promise (promessa) é comumente definida como <strong>um proxy para um valor que eventualmente ficará disponível</strong>.</p><p class="paragraph">Promises são um jeito de lidar com código assíncrono, sem ficar preso em <a href="http://callbackhell.com/" target="_blank" rel="noopener">&quot;inferno de callbacks&quot; (callback hell)</a>.</p><p class="paragraph">Promises são parte da linguagem por anos (introduzidas e padronizadas no ES2015), e se tornaram mais integradas recentemente, com <strong>async</strong> e <strong>await</strong> no ES2017.</p><p class="paragraph"><strong>Funções async</strong> usam promises por baixo dos panos, então entender como promises funcionam é fundamental para entender como <strong>async</strong> e <strong>await</strong> funcionam.</p><h3 class="heading3" id="comopromisesfuncionam,resumidamente">Como promises funcionam, resumidamente</h3><p class="paragraph">Uma vez que a promise tenha sido chamada, ela inicia em um <strong>estado pendente (pending)</strong>. Isso significa que a função que a chamou continua executando, enquanto a promise estiver pendente até que se resolva, retornando à função que a invocou os dados que foram requisitados.</p><p class="paragraph">A promise criada vai eventualmente se encerrar em um <strong>estado resolvido (resolved)</strong>, ou em um <strong>estado rejeitado (rejected)</strong>, chamando as respectivas funções callback (<code>then</code> e <code>catch</code>) ao terminar.</p><h3 class="heading3" id="quaisapisjsusampromises?">Quais APIs JS usam promises?</h3><p class="paragraph">Em adição ao seu código e o de bibliotecas, promises são usadas por padrão em APIs web modernas, como:</p><ul><li>Battery API</li><li>Fetch API</li><li>Service Workers</li></ul><p class="paragraph">É improvável que você mesmo <em>não</em> esteja utilizando promises no JavaScript moderno, então vamos começar a mergulhar nelas.</p><hr/><h2 class="heading2" id="criandoumapromise">Criando uma promise</h2><p class="paragraph">A Promise API expõe um contrutor Promise, por onde você inicializa usando <code>new Promise()</code>:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">let</span><span class="token plain"> done </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> isItDoneYet </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">done</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> workDone </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Here is the thing I built&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">resolve</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">workDone</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> why </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Still working on something else&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">why</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph">Como você pode ver, a promise checa a constante global <code>done</code>, e se for true, a promise vai para o estado <strong>resolved</strong> (uma vez que a callback <code>resolve</code> tenha sido chamada); caso contrário, a callback <code>reject</code> é executada, colocando a promise em um estado <strong>rejected</strong>. (Se nenhuma dessas funções é chamada, a promise permanece no estado <strong>pending</strong>).</p><p class="paragraph">Usando <code>resolve</code> e <code>reject</code>, podemos nos comunicar com a função invocadora dizendo qual estado a promise estava, e o que fazer com isso. No caso acima nós só retornamos uma string, mas poderia ser um objeto, ou mesmo <code>null</code>. Só de termos criado a promise no trecho acima, ela já começou a executar. É importante entender o que está acontecendo na seção <a href="#consumindo-uma-promise" target="_blank" rel="noopener">Consumindo uma promise</a> logo abaixo.</p><p class="paragraph">Um exemplo mais comum que você pode encontrar pois aí é uma técnica chamada <strong>Promisifying (promissificar)</strong>. Essa técnica é um jeito de poder usar uma função JavaScript clássica que recebe uma callback, e retornar uma promise:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> fs </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">require</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;fs&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">getFile</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">fileName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    fs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">readFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">fileName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function" style="color:rgb(220, 220, 170)">reject</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// chamar `reject` vai fazer com  que a promise falhe com ou sem o erro passado como argumento</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// e não queremos ir mais longe</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function" style="color:rgb(220, 220, 170)">resolve</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">getFile</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/etc/passwd&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><blockquote><p class="paragraph">Em versões recentes do Node.js, você não precisa fazer essa conversão manual para grande parte da API. Há uma função promisifying disponível no <a href="https://nodejs.org/docs/latest-v11.x/api/util.html#util_util_promisify_original" target="_blank" rel="noopener">módulo util</a> que fará isso por você, dado que a função que você esteja &quot;promissificando&quot; siga a assinatura correta.</p></blockquote><hr/><h2 class="heading2" id="consumindoumapromise">Consumindo uma promise</h2><p class="paragraph">Na última seção, nós introduzimos como uma promise é criada.</p><p class="paragraph">Agora vamos ver como uma promise pode ser <em>consumida</em> ou usada.</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> isItDoneYet </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token comment" style="color:rgb(106, 153, 85)">/* ... como acima ... */</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">//...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">checkIfItsDone</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  isItDoneYet</span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">ok</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">ok</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div></pre></pre><p class="paragraph">Rodar <code>checkIfItsDone()</code> vai especificar funções para executar quando a promise <code>isItDoneYet</code> resolver (na chamada <code>then</code>) ou rejeitar (na chamada <code>catch</code>).</p><hr/><h2 class="heading2" id="encadeandopromises">Encadeando promises</h2><p class="paragraph">Uma promise pode ser retornada para outra promise, criando uma cadeia de promises.</p><p class="paragraph">Um ótimo exemplo de encadeamento de promises é a Fetch API, que podemos usar para obter um recurso e enfileirar uma cadeia de promises para executar quando o recurso for obtido.</p><p class="paragraph">A Fetch API um mecanismo baseado em promise, e chamar <code>fetch()</code> é equivalente a definir suas próprias promises usando <code>new Promise()</code>.</p><h3 class="heading3" id="exemplodeencadeamentodepromises">Exemplo de encadeamento de promises</h3><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token parameter">response</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">200</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">300</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">resolve</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">statusText</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(220, 220, 170)">json</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token parameter">response</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">json</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/todos.json&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// note que a função `status` é na verdade **chamada** aqui, e ela **retorna uma promise**</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">json</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)">// da mesma forma, a única diferença aqui é que a função `json` retorna uma promise que é resolvida com `data`</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">// ... por isso que `data` aparece aqui como primeiro parâmetro da função anônima</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Request succeeded with JSON response&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">error</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Request failed&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph">Nesse exemplo, nós chamamos <code>fetch()</code> para obter uma lita de items TODO do arquivo <code>todos.json</code> localizado na raiz do domínio, e nós criamos uma cadeia de promises.</p><p class="paragraph">Rodanr <code>fetch()</code> retorna uma <a href="https://fetch.spec.whatwg.org/#concept-response" target="_blank" rel="noopener">response (resposta)</a>, que contém várias propriedades, e dentre elas as que usamos no exemplo:</p><ul><li><code>status</code>, um valor numérico representando o código de status HTTP</li><li><code>statusText</code>, uma mensagem de status, que será <code>OK</code> se a requisição for bem-sucedida.</li></ul><p class="paragraph"><code>response</code> também tem um método <code>json()</code>, que retorna uma promise que vai resolver com o conteúdo do body processado e transformado em JSON.</p><p class="paragraph">Então dadas essas promises, isso é o que acontece: a primeira promise na cadeia é a função que nós definimos, chamada <code>status()</code>, que checa o status da response e se não for uma resposta bem-sucedida (entre 200 e 299), a promise é rejeitada.</p><p class="paragraph">Essa operação fará com que a cadeia de promises pule todas promises encadeadas e pule diretamente para o <code>catch()</code> no final, logando o texto <code>Request failed</code> e a mensagem de erro.</p><p class="paragraph">Se em vez disso obter suceddo, é chamada a função <code>json()</code> que definimos. Desde que a promise anterior, quando bem-sucedida, tenha retornado o objeto <code>response</code>, nós o obtemos como um input para a segunda promise.</p><p class="paragraph">Nesse caso, nós retornamos os dados processados em JSON, assim a terceira promise recebe o JSON diretamente:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Request succeeded with JSON response&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph">e nós simplesmente o logamos no console.</p><hr/><h2 class="heading2" id="tratandoerros">Tratando erros</h2><p class="paragraph">No exemplo da seção anterior, nós tinhamos um <code>catch</code> que foi adicionado na cadeia de promises.</p><p class="paragraph">Quando qualquer coisa na cadeia de promises falha e dispara um erro ou rejeita uma promise, o controle vai para o <code>catch()</code> mais próximo na cadeia.</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// or</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><h3 class="heading3" id="cascateandoerros">Cascateando erros</h3><p class="paragraph">Se dentro do <code>catch()</code> você lançar um erro, você pode adicionar um segundo <code>catch()</code> para tratá-lo, e assim por diante.</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><hr/><h2 class="heading2" id="orquestrandopromises">Orquestrando promises</h2><h3 class="heading3" id="promise.all()">Promise.all()</h3><p class="paragraph">Se você precisa sincronizar promises diferentes, <code>Promise.all()</code> te ajuda a definir uma lista de promises, e executa algo quando elas todas são resolvidas.</p><p class="paragraph">Examplo:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> f1 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/something.json&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> f2 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">fetch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/something2.json&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">all</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">f1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> f2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Array of results&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">catch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">err</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph">A sintaxe de atribuição por desestruturação do ES2015 permite que você também faça isso:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">all</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">f1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> f2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token parameter">res1</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> res2</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Results&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> res1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> res2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><p class="paragraph">É claro que você não está limitado a só usar o <code>fetch</code>, <strong>qualquer promise pode ser usada dessa forma</strong>.</p><h3 class="heading3" id="promise.race()">Promise.race()</h3><p class="paragraph"><code>Promise.race()</code> roda quando a primeira das promises que você passar for resolvida, e roda a callback anexada apenas uma vez, com o resultado da primeira promise resolvida.</p><p class="paragraph">Exemplo:</p><pre class="pre"><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> first </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">setTimeout</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">500</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;first&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> second </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function" style="color:rgb(220, 220, 170)">setTimeout</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;second&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block"></span></div><div class="token-line"><span class="token plain"></span><span class="token known-class-name class-name" style="color:rgb(78, 201, 176)">Promise</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">race</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">first</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> second</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">then</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">result</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">log</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// second</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></div></pre></pre><h2 class="heading2" id="erroscomuns">Erros comuns</h2><h3 class="heading3" id="uncaughttypeerror:undefinedisnotapromise">Uncaught TypeError: undefined is not a promise</h3><p class="paragraph">Se você obter um erro <code>Uncaught TypeError: undefined is not a promise</code> no console, certifique-se de usar <code>new Promise()</code> em vez de apenas <code>Promise()</code>.</p><h3 class="heading3" id="unhandledpromiserejectionwarning">UnhandledPromiseRejectionWarning</h3><p class="paragraph">Isso significa que a promise que você chamou foi rejeitada, mas não tinha nenhum <code>catch</code> preparado para tratar o erro. Adicione um <code>catch</code> depois do <code>then</code> causador do erro para tratá-lo propriamente.</p></div><div class="addPaddTopBottom"><div class="nextPreviousWrapper"><a class="previousBtn" href="/0033-javascript-callbacks/index"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>Programação assíncrona de JavaScript e Callbacks</span></div></div></a><a class="nextBtn" href="/0035-javascript-async-await/index"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>JavaScript assíncrono moderno com Async e Await</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><style data-emotion-css="gqp3x7">.css-gqp3x7{width:224px;}</style><div class="hiddenMobile css-gqp3x7 ezj7nro4"><style data-emotion-css="1p56bun">.css-1p56bun{width:100%;background-color:#fff;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:24px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;}@media only screen and (max-width:50rem){.css-1p56bun{width:100%;position:relative;}}</style><aside class="css-1p56bun ekuuqq40"><ul class="rightSideBarUL"><li class="rightSideTitle">CONTENTS</li><style data-emotion-css="y7fnpn">.css-y7fnpn{list-style:none;}.css-y7fnpn a{color:#5C6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-y7fnpn a:hover{color:rgb(116,76,188) !important;}.css-y7fnpn a svg{float:right;margin-right:1rem;}</style><li class="css-y7fnpn ekuuqq41"><a href="#introduçãoapromises" to="#introduçãoapromises">Introdução a Promises</a></li><li class="css-y7fnpn ekuuqq41"><a href="#criandoumapromise" to="#criandoumapromise">Criando uma promise</a></li><li class="css-y7fnpn ekuuqq41"><a href="#consumindoumapromise" to="#consumindoumapromise">Consumindo uma promise</a></li><li class="css-y7fnpn ekuuqq41"><a href="#encadeandopromises" to="#encadeandopromises">Encadeando promises</a></li><li class="css-y7fnpn ekuuqq41"><a href="#tratandoerros" to="#tratandoerros">Tratando erros</a></li><li class="css-y7fnpn ekuuqq41"><a href="#orquestrandopromises" to="#orquestrandopromises">Orquestrando promises</a></li><li class="css-y7fnpn ekuuqq41"><a href="#erroscomuns" to="#erroscomuns">Erros comuns</a></li></ul></aside></div></div></div></div></div><script>
        window.gatsbyLoadInstagram = function() {
          var js = document.createElement('script');
          var firstScript = document.getElementsByTagName('script')[0];
          js.id = 'gatsby-plugin-instagram';
          js.src = 'https://instagram.com/embed.js';

          firstScript.parentNode.insertBefore(js, firstScript);

          return true;
        }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/0034-javascript-promises/index";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6d6666e88e12b46ed936.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/app-6d6666e88e12b46ed936.js" async=""></script><script src="/commons-bf39fb211f2d41bc33ff.js" async=""></script><script src="/styles-59bc4aca6fceaa19b309.js" async=""></script><script src="/webpack-runtime-93e739afd2c308098c8e.js" async=""></script><script defer="">
            function navBarClose() {
              document.getElementById("navbar").classList.toggle("responsive");
            }
            document.addEventListener('click',function(e){
              if(e.target && e.target.tagName.toLowerCase() === 'a'){
                navBarClose();
              }
           });
            </script></body></html>